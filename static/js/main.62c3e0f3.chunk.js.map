{"version":3,"sources":["components/Editor.js","services/APIService.js","services/StorageService.js","components/ToggleEditor.js","components/MarkdownRender.js","config.js","components/EditorActions.js","components/Output.js","components/LiveEditor.js","components/Loading.js","components/MarkdownViewer.js","App.js","assets/about.js","index.js"],"names":["Editor","className","autoFocus","onChange","this","props","value","ref","el","textarea","pseudoArea","addEventListener","e","console","log","scrollTop","React","Component","API_URI","APIService","post","body","window","fetch","method","headers","JSON","stringify","then","result","json","get","id","StorageService","createLink","text","content","error","Promise","reject","uri","getMarkdown","Error","cacheMarkdown","markdown","localStorage","setItem","getCachedMarkdown","getItem","ToggleEditor","onClick","MarkdownRender","newProps","plugins","RemarkMathPlugin","renderers","math","inlineMath","code","config","location","host","EditorActions","linkContent","isCreatingLink","onSave","shouldShowHelp","href","target","rel","baseName","Output","fullScreen","toggleFullScreen","source","LiveEditor","state","preset","generatedURI","handleChange","bind","handleSave","closeSavingInfo","event","setState","shouldShowSavingInfo","Loading","MarkdownViewer","match","isLoading","params","catch","message","App","basename","exact","path","component","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.62c3e0f3.chunk.js","sourcesContent":["import React from 'react';\nimport Highlight from 'react-highlight';\n\nexport class Editor extends React.Component {\n  render() {\n    return (\n      <div className=\"editor\">\n        <textarea autoFocus className=\"editor__textarea\" onChange={ this.props.onChange } \n        value={ this.props.value } ref={ (el) => this.textarea = el } />\n        <div className=\"editor__pseudo-textarea\" ref={ (el) => { this.pseudoArea = el } }>\n          <Highlight className=\"markdown\">{ this.props.value || \"Enter your markdown\" }</Highlight>\n        </div>\n      </div>\n    )\n  }\n\n  componentDidMount() {\n    this.textarea.addEventListener('scroll', (e) => {\n      console.log(this.pseudoArea.scrollTop);\n      this.pseudoArea.scrollTop = this.textarea.scrollTop;\n    })\n  }\n}","const API_URI = 'https://anikeef-write-api.herokuapp.com/'\n\nexport const APIService = (function() {\n  const post = (body) => {\n    return window.fetch(API_URI + 'markdowns', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    }).then(\n      (result) => result.json()\n    );\n  }\n\n  const get = (id) => {\n    return window.fetch(API_URI + 'markdowns/' + id)\n      .then(\n        (result) => result.json()\n      )\n  }\n\n  return { post, get };\n})();","import { APIService } from './APIService';\n\nexport const StorageService = (function() {\n  const cacheMarkdown = (markdown) => {\n    window.localStorage.setItem('markdown', markdown);\n  }\n\n  const getCachedMarkdown = () => {\n    return window.localStorage.getItem('markdown') || '';\n  }\n\n  const createLink = (text) => {\n    return APIService.post({ content: text })\n      .then((result) => {\n        if (result.error) {\n          return Promise.reject('Server error: ' + result.error);\n        }\n        return result.uri\n      });\n  }\n\n  const getMarkdown = (id) => {\n    return APIService.get(id)\n      .then((result) => {\n        if (result.error) {\n          // return Promise.reject('Server error: ' + result.error);\n          throw Error('Server error: ' + result.error);\n        }\n        return result.content;\n      });\n  }\n\n  return { createLink, getMarkdown, cacheMarkdown, getCachedMarkdown };\n})();\n\n// export const StorageService = (function() {\n//   const _extractIdFromURI = (uri) => {\n//     return uri.split(\"/\").slice(-1);\n//   }\n\n//   const getCachedMarkdown = () => {\n//     return window.localStorage.getItem('markdown') || '';\n//   }\n\n//   const createLink = (text) => {\n//     return MyJsonService.post({ markdown: text })\n//       .then(\n//         (json) => config.uriBase + _extractIdFromURI(json.uri),\n//         (error) => console.log(error)\n//       );\n//   }\n\n//   const getMarkdown = (id) => {\n//     return MyJsonService.get(id).then(\n//         (json) => json.markdown,\n//         (error) => console.log(error)\n//       )\n//   }\n\n//   const cacheMarkdown = (markdown) => {\n//     window.localStorage.setItem('markdown', markdown);\n//   }\n\n//   return { createLink, getMarkdown, cacheMarkdown, getCachedMarkdown };\n// })();","import React from 'react';\n\nexport const ToggleEditor = ({ onClick }) => {\n  return (\n    <div className=\"output__toggle-editor\" onClick={ onClick }>\n      <span className=\"icon icon-arrow-left output__toggle-button\"></span>\n    </div>\n  )\n}","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport RemarkMathPlugin from 'remark-math';\nimport 'katex/dist/katex.min.css';\nimport 'highlight.js/styles/default.css';\nimport { InlineMath, BlockMath } from 'react-katex';\nimport Highlight from 'react-highlight';\n\nexport const MarkdownRender = (props) => {\n  const newProps = {\n    ...props,\n    plugins: [\n      RemarkMathPlugin,\n    ],\n    renderers: {\n      ...props.renderers,\n      math: ({ value }) => <BlockMath>{ value }</BlockMath>,\n      inlineMath: ({ value }) => <InlineMath>{ value }</InlineMath>,\n      code: ({ value }) => <Highlight>{ value }</Highlight>\n    },\n    className: 'output__content'\n  };\n  return (\n    <ReactMarkdown {...newProps} />\n  );\n};","export const config = {\n  get uriBase() {\n    return (window.location.host === \"localhost:3000\") ? \n      \"localhost:3000/\" : \"https://anikeef.github.io/write/\";\n  },\n\n  get baseName() {\n    return (window.location.host === \"localhost:3000\") ? \n      \"/\" : \"write/\";\n  }\n}","import React from 'react';\nimport { config } from '../config';\n\nexport const EditorActions = ({ uri, isCreatingLink, onSave, shouldShowHelp }) => {\n  let linkContent;\n  if (uri) {\n    linkContent = <a href={ uri } target=\"_blank\" rel=\"noopener noreferrer\">{ uri }</a>;\n  } else if (isCreatingLink) {\n    linkContent = 'Подождите...';\n  } else {\n    linkContent = 'Cоздать ссылку';\n  }\n\n  return (\n    <div className='editor-actions'>\n      <div className='editor-actions__create-link' onClick={ onSave }>\n        { linkContent }\n      </div>\n      { shouldShowHelp &&\n        <a href={ config.baseName + 'about'  } className='editor-actions__help' >?</a>\n      }\n    </div>\n  );\n}","import React from 'react';\nimport { ToggleEditor } from './ToggleEditor';\nimport { MarkdownRender } from './MarkdownRender';\nimport { EditorActions } from './EditorActions';\n\nexport const Output = ({ \n  fullScreen, uri, onSave, isCreatingLink, shouldShowHelp, toggleFullScreen, markdown}) => {\n  return (\n    <div className={ \"output\" + (fullScreen ? \" output_fullscreen\" : \"\")}>\n      <EditorActions uri={ uri } onSave={ onSave } \n      isCreatingLink={ isCreatingLink } shouldShowHelp={ shouldShowHelp } />\n      <ToggleEditor onClick={ toggleFullScreen }/>\n      <MarkdownRender source={ markdown }></MarkdownRender>\n    </div>\n  );\n}","import React from 'react';\n\nimport { Editor } from \"./Editor\";\nimport { StorageService } from '../services/StorageService';\nimport { Output } from './Output';\n\nexport class LiveEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      markdown: props.preset || StorageService.getCachedMarkdown(),\n      fullScreen: false,\n      generatedURI: '',\n      isCreatingLink: false\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.toggleFullScreen = this.toggleFullScreen.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.closeSavingInfo = this.closeSavingInfo.bind(this);\n  }\n\n  render() {\n    return (\n      <div className=\"live-editor\">\n        <Editor value={ this.state.markdown } onChange={ this.handleChange }/>\n        <Output fullScreen={ this.state.fullScreen } uri={ this.state.generatedURI }\n        onSave={ this.handleSave } isCreatingLink={ this.state.isCreatingLink }\n        shouldShowHelp={ !this.props.preset } toggleFullScreen={ this.toggleFullScreen }\n        markdown={ this.state.markdown } />\n      </div>\n    );\n  }\n\n  handleChange(event) {\n    this.setState({\n      markdown: event.target.value,\n      shouldShowSavingInfo: false,\n      generatedURI: \"\"\n    });\n    StorageService.cacheMarkdown(event.target.value);\n  }\n\n  toggleFullScreen() {\n    this.setState({\n      fullScreen: !this.state.fullScreen\n    });\n  }\n\n  handleSave() {\n    if (this.state.generatedURI && this.state.isCreatingLink) return;\n    this.setState({ isCreatingLink: true });\n    StorageService.createLink(this.state.markdown)\n      .then(\n        (uri) => {\n          this.setState({\n            generatedURI: uri,\n            isCreatingLink: false\n          })\n        }\n      );\n  }\n\n  closeSavingInfo() {\n    if (this.state.shouldShowSavingInfo) {\n      this.setState({ shouldShowSavingInfo: false })\n    }\n  }\n}\n","import React from 'react';\nimport { HashLoader } from 'react-spinners';\n\nexport const Loading = () => {\n  return (\n    <div className=\"loading\">\n      <HashLoader></HashLoader>\n    </div>\n    \n  );\n}","import React from 'react';\n\nimport { MarkdownRender } from \"./MarkdownRender\";\nimport { StorageService } from '../services/StorageService';\nimport { Loading } from './Loading';\n\nexport class MarkdownViewer extends React.Component {\n  constructor({ match }) {\n    super();\n    this.state = {\n      markdown: \"\",\n      isLoading: true\n    }\n    StorageService.getMarkdown(match.params.id)\n      .then((markdown) => {\n        this.setState({ \n          markdown: markdown,\n          isLoading: false\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        this.setState({ \n          markdown: error.message,\n          isLoading: false\n        });\n      });\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return <Loading />\n    }\n\n    return (\n      <div className=\"output output_fullscreen\">\n        <div className=\"output__content\">\n          <MarkdownRender source={ this.state.markdown } />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport { LiveEditor } from './components/LiveEditor';\nimport { MarkdownViewer } from './components/MarkdownViewer';\nimport { config } from './config';\nimport { aboutText } from './assets/about';\n\nconst App = () => {\n  return (\n    <BrowserRouter basename={ config.baseName }>\n      <Switch>\n        <Route exact path='/' component={ LiveEditor } />\n        <Route exact path='/markdowns/:id' component={ MarkdownViewer } />\n        <Route path='/about' render={ () => <LiveEditor preset={ aboutText } /> } />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","export const aboutText = `# Привет!\n\nДобро пожаловать в редактор [Markdown](https://ru.wikipedia.org/wiki/Markdown) - самого дружелюбного языка разметки. Чтобы показать/скрыть редактор, нажмите на стрелку в левой части окна вывода.\n\n### Кому это нужно?\n\nДанный редактор будет полезен, чтобы быстро поделиться красиво отформатированным текстом. Markdown позволяет создавать чистые документы, думая только об их содержании - оформление редактор берет на себя. Подробнее об этом можно узнать [здесь](https://ru.wikipedia.org/wiki/WYSIWYM).\n\n### Как этим пользоваться?\n\nЧтобы поделиться введенным текстом, просто нажмите на серый прямоугольник в правом верхнем углу. Эта кнопка создаст короткую ссылку на **неизменяемый** вариант вашего текста. Все ссылки жестко привязаны к их содержимому - если позднее вы захотите изменить документ, просто создайте новую ссылку.\n\n### Что здесь можно делать?\n\nМного чего. Можно писать буквы, **выделять** их, *наклонять* и даже ~~зачеркивать~~. А можно заняться математикой - редактор поддерживает [$\\\\TeX$ уравнения](https://katex.org/docs/supported.html)  на любой вкус. Они могут быть как строчными: $a^{\\\\phi(n)}$, так и блочными:\n\n$$\nF_a(x) = \\\\int_8^\\\\infty {x \\\\over e^{\\\\pi i} + 1} dx\n$$\n\nА еще редактор поддерживает \\`код\\`. Он тоже может быть как \\`строчным\\`, так и блочным с автоматической подсветкой синтаксиса:\n\n\\`\\`\\`\n#include <stdio.h>\n\nint main() {\n  printf(\"Hello, world\");\n}\n\\`\\`\\`\n\nМожно даже вставлять изображения из интернета. Но загрузка картинок напрямую с компьютера пока \nне поддерживается.\n\n![](https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Zeta_polar.svg/560px-Zeta_polar.svg.png)\n\nМожно создавать таблицы (и не обязательно их выравнивать в исходном коде)\n\n| Tables        | Are           | Cool  |\n|:------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |\n\nБолее полный список возможностей Markdown находится [здесь](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet).\n\n**Примечание:** Сейчас вы скорее всего находитесь на странице /about. Чтобы введенный текст сохранялся при обновлении, перейдите [в обычный режим](https://anikeef.github.io/write/).\n\n### Чего здесь нельзя делать?\n\nЗдесь не стоит сохранять конфиденциальную информацию и все такое. Так как приложение находится в бета-режиме, не стоит использовать его для хранения исторических документов, ведения личного дневника или семейного архива - в случае утери информации разработчик ответственности не несет.`","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}