{"version":3,"sources":["components/MarkdownRender.js","components/Editor.js","components/ToggleEditor.js","services/APIService.js","services/StorageService.js","components/Loading.js","components/EditorActions.js","components/LiveEditor.js","components/MarkdownViewer.js","config.js","App.js","assets/about.js","index.js"],"names":["MarkdownRender","props","newProps","plugins","RemarkMathPlugin","renderers","math","value","inlineMath","code","Editor","onChange","autoFocus","className","placeholder","ToggleEditor","onClick","API_URI","APIService","post","body","window","fetch","method","headers","JSON","stringify","then","result","json","get","id","StorageService","createLink","text","content","error","Promise","reject","uri","getMarkdown","Error","cacheMarkdown","markdown","localStorage","setItem","getCachedMarkdown","getItem","Loading","EditorActions","linkContent","isCreatingLink","onSave","shouldShowHelp","href","target","rel","LiveEditor","state","preset","fullScreen","generatedURI","handleChange","bind","toggleEditor","handleSave","closeSavingInfo","this","isLoading","source","event","setState","shouldShowSavingInfo","React","Component","MarkdownViewer","match","params","catch","console","message","config","location","host","App","basename","baseName","exact","path","component","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.7cbb2027.chunk.js","sourcesContent":["import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport RemarkMathPlugin from 'remark-math';\nimport 'katex/dist/katex.min.css';\nimport 'highlight.js/styles/default.css';\nimport { InlineMath, BlockMath } from 'react-katex';\nimport Highlight from 'react-highlight';\n\nexport const MarkdownRender = (props) => {\n  const newProps = {\n    ...props,\n    plugins: [\n      RemarkMathPlugin,\n    ],\n    renderers: {\n      ...props.renderers,\n      math: ({ value }) => <BlockMath>{ value }</BlockMath>,\n      inlineMath: ({ value }) => <InlineMath>{ value }</InlineMath>,\n      code: ({ value }) => <Highlight>{ value }</Highlight>\n    }\n  };\n  return (\n    <ReactMarkdown {...newProps} />\n  );\n};","import React from 'react';\n\nexport const Editor = ({ onChange, value }) => {\n  return (\n    <textarea autoFocus className=\"editor\" onChange={ onChange } value={ value }\n    placeholder=\"Enter your markdown\"></textarea>\n  )\n}","import React from 'react';\n\nexport const ToggleEditor = ({ onClick }) => {\n  return (\n    <div className=\"output__toggle-editor\" onClick={ onClick }>\n      <span className=\"icon icon-arrow-left output__toggle-button\"></span>\n    </div>\n  )\n}","const API_URI = 'https://anikeef-write-api.herokuapp.com/'\n\nexport const APIService = (function() {\n  const post = (body) => {\n    return window.fetch(API_URI + 'markdowns', {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    }).then(\n      (result) => result.json()\n    );\n  }\n\n  const get = (id) => {\n    return window.fetch(API_URI + 'markdowns/' + id)\n      .then(\n        (result) => result.json()\n      )\n  }\n\n  return { post, get };\n})();","import { APIService } from './APIService';\n\nexport const StorageService = (function() {\n  const cacheMarkdown = (markdown) => {\n    window.localStorage.setItem('markdown', markdown);\n  }\n\n  const getCachedMarkdown = () => {\n    return window.localStorage.getItem('markdown') || '';\n  }\n\n  const createLink = (text) => {\n    return APIService.post({ content: text })\n      .then((result) => {\n        if (result.error) {\n          return Promise.reject('Server error: ' + result.error);\n        }\n        return result.uri\n      });\n  }\n\n  const getMarkdown = (id) => {\n    return APIService.get(id)\n      .then((result) => {\n        if (result.error) {\n          // return Promise.reject('Server error: ' + result.error);\n          throw Error('Server error: ' + result.error);\n        }\n        return result.content;\n      });\n  }\n\n  return { createLink, getMarkdown, cacheMarkdown, getCachedMarkdown };\n})();\n\n// export const StorageService = (function() {\n//   const _extractIdFromURI = (uri) => {\n//     return uri.split(\"/\").slice(-1);\n//   }\n\n//   const getCachedMarkdown = () => {\n//     return window.localStorage.getItem('markdown') || '';\n//   }\n\n//   const createLink = (text) => {\n//     return MyJsonService.post({ markdown: text })\n//       .then(\n//         (json) => config.uriBase + _extractIdFromURI(json.uri),\n//         (error) => console.log(error)\n//       );\n//   }\n\n//   const getMarkdown = (id) => {\n//     return MyJsonService.get(id).then(\n//         (json) => json.markdown,\n//         (error) => console.log(error)\n//       )\n//   }\n\n//   const cacheMarkdown = (markdown) => {\n//     window.localStorage.setItem('markdown', markdown);\n//   }\n\n//   return { createLink, getMarkdown, cacheMarkdown, getCachedMarkdown };\n// })();","import React from 'react';\nimport { HashLoader } from 'react-spinners';\n\nexport const Loading = () => {\n  return (\n    <div className=\"loading\">\n      <HashLoader></HashLoader>\n    </div>\n    \n  );\n}","import React from 'react';\n\nexport const EditorActions = ({ uri, isCreatingLink, onSave, shouldShowHelp }) => {\n  let linkContent;\n  if (uri) {\n    linkContent = <a href={ uri } target=\"_blank\" rel=\"noopener noreferrer\">{ uri }</a>;\n  } else if (isCreatingLink) {\n    linkContent = 'Подождите...';\n  } else {\n    linkContent = 'Cоздать ссылку';\n  }\n\n  return (\n    <div className='editor-actions'>\n      <div className='editor-actions__create-link' onClick={ onSave }>\n        { linkContent }\n      </div>\n      { shouldShowHelp &&\n        <a className='editor-actions__help' href='/write/about' target=\"_blank\" rel=\"noopener noreferrer\">?</a>\n      }\n    </div>\n  );\n}","import React from 'react';\n\nimport { MarkdownRender } from \"./MarkdownRender\";\nimport { Editor } from \"./Editor\";\nimport { ToggleEditor } from \"./ToggleEditor\";\nimport { StorageService } from '../services/StorageService';\nimport { Loading } from './Loading';\nimport { EditorActions } from './EditorActions';\n\nexport class LiveEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      markdown: props.preset || StorageService.getCachedMarkdown(),\n      fullScreen: false,\n      generatedURI: '',\n      isCreatingLink: false\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.toggleEditor = this.toggleEditor.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.closeSavingInfo = this.closeSavingInfo.bind(this);\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return <Loading />\n    }\n\n    return (\n      <div className=\"live-editor\">\n        <Editor value={ this.state.markdown } onChange={ this.handleChange }/>\n        <div className={ \"output\" + (this.state.fullScreen ? \" output_fullscreen\" : \"\")}>\n          <EditorActions uri={ this.state.generatedURI } onSave={ this.handleSave } \n          isCreatingLink={ this.state.isCreatingLink } shouldShowHelp={ !this.props.preset } />\n          <ToggleEditor onClick={ this.toggleEditor }/>\n          <div className=\"output__content\">\n            <MarkdownRender source={ this.state.markdown }></MarkdownRender>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  handleChange(event) {\n    this.setState({\n      markdown: event.target.value,\n      shouldShowSavingInfo: false,\n      generatedURI: \"\"\n    });\n    StorageService.cacheMarkdown(event.target.value);\n  }\n\n  toggleEditor() {\n    this.setState({\n      fullScreen: !this.state.fullScreen\n    });\n  }\n\n  handleSave() {\n    if (this.state.generatedURI && this.state.isCreatingLink) return;\n    this.setState({ isCreatingLink: true });\n    StorageService.createLink(this.state.markdown)\n      .then(\n        (uri) => {\n          this.setState({\n            generatedURI: uri,\n            isCreatingLink: false\n          })\n        }\n      );\n  }\n\n  closeSavingInfo() {\n    if (this.state.shouldShowSavingInfo) {\n      this.setState({ shouldShowSavingInfo: false })\n    }\n  }\n}\n","import React from 'react';\n\nimport { MarkdownRender } from \"./MarkdownRender\";\nimport { StorageService } from '../services/StorageService';\nimport { Loading } from './Loading';\n\nexport class MarkdownViewer extends React.Component {\n  constructor({ match }) {\n    super();\n    this.state = {\n      markdown: \"\",\n      isLoading: true\n    }\n    StorageService.getMarkdown(match.params.id)\n      .then((markdown) => {\n        this.setState({ \n          markdown: markdown,\n          isLoading: false\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        this.setState({ \n          markdown: error.message,\n          isLoading: false\n        });\n      });\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return <Loading />\n    }\n\n    return (\n      <div className=\"output output_fullscreen\">\n        <div className=\"output__content\">\n          <MarkdownRender source={ this.state.markdown } />\n        </div>\n      </div>\n    );\n  }\n}\n","export const config = {\n  get uriBase() {\n    return (window.location.host === \"localhost:3000\") ? \n      \"localhost:3000/\" : \"https://anikeef.github.io/write/\";\n  },\n\n  get baseName() {\n    return (window.location.host === \"localhost:3000\") ? \n      \"/\" : \"write/\";\n  }\n}","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport { LiveEditor } from './components/LiveEditor';\nimport { MarkdownViewer } from './components/MarkdownViewer';\nimport { config } from './config';\nimport { aboutText } from './assets/about';\n\nconst App = () => {\n  return (\n    <BrowserRouter basename={ config.baseName }>\n      <Switch>\n        <Route exact path='/' component={ LiveEditor } />\n        <Route exact path='/markdowns/:id' component={ MarkdownViewer } />\n        <Route path='/about' render={ () => <LiveEditor preset={ aboutText } /> } />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","export const aboutText = `# Привет!\n\nДобро пожаловать в редактор [Markdown](https://ru.wikipedia.org/wiki/Markdown) - самого дружелюбного языка разметки. Чтобы показать/скрыть редактор, нажмите на стрелку в левой части окна вывода.\n\n### Кому это нужно?\n\nДанный редактор будет полезен, чтобы быстро поделиться красиво отформатированным текстом. Markdown позволяет создавать чистые документы, думая только об их содержании - оформление редактор берет на себя. Подробнее об этом можно узнать [здесь](https://ru.wikipedia.org/wiki/WYSIWYM).\n\n### Как этим пользоваться?\n\nЧтобы поделиться введенным текстом, просто нажмите на серый прямоугольник в правом верхнем углу. Эта кнопка создаст короткую ссылку на **неизменяемый** вариант вашего текста. Все ссылки жестко привязаны к их содержимому - если позднее вы захотите изменить документ, просто создайте новую ссылку.\n\n### Что здесь можно делать?\n\nМного чего. Можно писать буквы, **выделять** их, *наклонять* и даже ~~зачеркивать~~. А можно заняться математикой - редактор поддерживает [$\\\\TeX$ уравнения](https://katex.org/docs/supported.html)  на любой вкус. Они могут быть как строчными: $a^{\\\\phi(n)}$, так и блочными:\n\n$$\nF_a(x) = \\\\int_8^\\\\infty {x \\\\over e^{\\\\pi i} + 1} dx\n$$\n\nА еще редактор поддерживает \\`код\\`. Он тоже может быть как \\`строчным\\`, так и блочным с автоматической подсветкой синтаксиса:\n\n\\`\\`\\`\n#include <stdio.h>\n\nint main() {\n  printf(\"Hello, world\");\n}\n\\`\\`\\`\n\nМожно даже вставлять изображения из интернета. Но загрузка картинок напрямую с компьютера пока \nне поддерживается.\n\n![](https://upload.wikimedia.org/wikipedia/commons/thumb/7/7f/Zeta_polar.svg/560px-Zeta_polar.svg.png)\n\nМожно создавать таблицы (и не обязательно их выравнивать в исходном коде)\n\n| Tables        | Are           | Cool  |\n|:------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |\n\nБолее полный список возможностей Markdown находится [здесь](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet).\n\n**Примечание:** Сейчас вы скорее всего находитесь на странице /about. Чтобы введенный текст сохранялся при обновлении, перейдите [в обычный режим](/).\n\n### Чего здесь нельзя делать?\n\nЗдесь не стоит сохранять конфиденциальную информацию и все такое. Так как приложение находится в бета-режиме, не стоит использовать его для хранения исторических документов, ведения личного дневника или семейного архива - в случае утери информации разработчик ответственности не несет.`","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}