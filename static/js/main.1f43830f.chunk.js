(window["webpackJsonpreact-md"]=window["webpackJsonpreact-md"]||[]).push([[0],{356:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(42),c=n.n(o),i=(n(56),n(48)),l=n(15),s=n(10),u=n(11),h=n(13),d=n(12),m=n(9),f=n(14),g=n(43),v=n(44),p=n.n(v),w=n(45),b=n.n(w),k=(n(141),n(142),n(30)),S=n(46),E=n.n(S);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=j({},e,{plugins:[b.a],renderers:j({},e.renderers,{math:function(e){var t=e.value;return r.a.createElement(k.BlockMath,null,t)},inlineMath:function(e){var t=e.value;return r.a.createElement(k.InlineMath,null,t)},code:function(e){var t=e.value;return r.a.createElement(E.a,null,t)}})});return r.a.createElement(p.a,t)},I=function(e){var t=e.onChange,n=e.value;return r.a.createElement("textarea",{autoFocus:!0,className:"editor",onChange:t,value:n,placeholder:"Enter your markdown"})},C=function(e){var t=e.onClick;return r.a.createElement("div",{className:"output__toggle-editor",onClick:t},r.a.createElement("span",{className:"icon icon-arrow-left output__toggle-button"}))},N=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url;return e.shouldShow?r.a.createElement("div",{className:"save-info"},t?r.a.createElement("a",{className:"saved-link",href:t,target:"_blank",rel:"noopener noreferrer"},t):"Wait..."):null}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.props.close)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.props.close)}}]),t}(r.a.Component),L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).container=null,n.handleClose=n.handleClose.bind(Object(m.a)(n)),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,a=t.url,o=t.shouldShowSavingInfo;return r.a.createElement("div",{className:"save-container",ref:function(t){return e.container=t}},r.a.createElement(N,{url:a,shouldShow:o,close:this.handleClose}),r.a.createElement("button",{className:"save-button",onClick:n},r.a.createElement("span",{className:"icon icon-fullscreen"})))}},{key:"handleClose",value:function(e){this.container.contains(e.target)||this.props.closeSavingInfo()}}]),t}(r.a.Component),M="https://anikeef-write-api.herokuapp.com/",_={post:function(e){return window.fetch(M+"markdowns",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))},get:function(e){return window.fetch(M+"markdowns/"+e).then((function(e){return e.json()}))}},P={createLink:function(e){return _.post({content:e}).then((function(e){return e.error?Promise.reject("Server error: "+e.error):e.uri}))},getMarkdown:function(e){return _.get(e).then((function(e){if(e.error)throw Error("Server error: "+e.error);return e.content}))},cacheMarkdown:function(e){window.localStorage.setItem("markdown",e)},getCachedMarkdown:function(){return window.localStorage.getItem("markdown")||""}},R=n(47),U=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement(R.HashLoader,null))},D=function(e){function t(e){var n,a=e.presetId;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this))).state={markdown:P.getCachedMarkdown(),fullScreen:!1,generatedURI:"",shouldShowSavingInfo:!1,isLoading:!!a},a&&P.getMarkdown(a).then((function(e){n.setState({markdown:e,isLoading:!1})})),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.toggleEditor=n.toggleEditor.bind(Object(m.a)(n)),n.handleSave=n.handleSave.bind(Object(m.a)(n)),n.closeSavingInfo=n.closeSavingInfo.bind(Object(m.a)(n)),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.isLoading?r.a.createElement(U,null):r.a.createElement("div",{className:"live-editor"},r.a.createElement(I,{value:this.state.markdown,onChange:this.handleChange}),r.a.createElement("div",{className:"output"+(this.state.fullScreen?" output_fullscreen":"")},r.a.createElement(L,{url:this.state.generatedURI,onClick:this.handleSave,shouldShowSavingInfo:this.state.shouldShowSavingInfo,closeSavingInfo:this.closeSavingInfo}),r.a.createElement(C,{onClick:this.toggleEditor}),r.a.createElement("div",{className:"output__content"},r.a.createElement(y,{source:this.state.markdown}))))}},{key:"handleChange",value:function(e){this.setState({markdown:e.target.value,shouldShowSavingInfo:!1,generatedURI:""}),P.cacheMarkdown(e.target.value)}},{key:"toggleEditor",value:function(){this.setState({fullScreen:!this.state.fullScreen})}},{key:"handleSave",value:function(){var e=this;this.setState({shouldShowSavingInfo:!this.state.shouldShowSavingInfo}),this.state.generatedURI||P.createLink(this.state.markdown).then((function(t){e.setState({generatedURI:t})}))}},{key:"closeSavingInfo",value:function(){this.state.shouldShowSavingInfo&&this.setState({shouldShowSavingInfo:!1})}}]),t}(r.a.Component),x=function(e){function t(e){var n,a=e.match;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this))).state={markdown:"",isLoading:!0},P.getMarkdown(a.params.id).then((function(e){n.setState({markdown:e,isLoading:!1})})).catch((function(e){console.error(e),n.setState({markdown:e.message,isLoading:!1})})),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.isLoading?r.a.createElement(U,null):r.a.createElement("div",{className:"output output_fullscreen"},r.a.createElement("div",{className:"output__content"},r.a.createElement(y,{source:this.state.markdown})))}}]),t}(r.a.Component),B={get uriBase(){return"localhost:3000"===window.location.host?"localhost:3000/":"https://anikeef.github.io/write/"},get baseName(){return"localhost:3000"===window.location.host?"/":"write/"}},J=function(){return r.a.createElement(i.a,{basename:B.baseName},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:D}),r.a.createElement(l.a,{exact:!0,path:"/markdowns/:id",component:x}),r.a.createElement(l.a,{path:"/about",render:function(e){e.match;return r.a.createElement(D,{presetId:"lejRe"})}})))};c.a.render(r.a.createElement(J,null),document.getElementById("root"))},51:function(e,t,n){e.exports=n(356)},56:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.1f43830f.chunk.js.map